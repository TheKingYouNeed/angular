<div class="container mt-4">
  <!-- Header with title and add button -->
  <div class="row mb-4">
    <div class="col">
      <h2>Liste des Produits</h2>
    </div>
    <div class="col-auto">
      <button class="btn btn-primary" [routerLink]="['/products/new']">
        <i class="bi bi-plus-circle me-1"></i> Ajouter un Produit
      </button>
    </div>
  </div>

  <!-- Loading indicator -->
  <div *ngIf="loading" class="d-flex justify-content-center my-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <!-- Error message -->
  <div *ngIf="error" class="alert alert-danger" role="alert">
    {{ error }}
    <button type="button" class="btn-close float-end" (click)="error = null"></button>
  </div>

  <!-- Product table -->
  <div class="table-responsive" *ngIf="!loading">
    <table class="table table-striped table-hover">
      <thead class="table-light">
        <tr>
          <th>ID</th>
          <th>Nom</th>
          <th>Prix</th>
          <th>Quantité</th>
          <th>Sélectionné</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products">
          <td>{{ product.id }}</td>
          <td>{{ product.name }}</td>
          <td>{{ product.price | currency }}</td>
          <td>{{ product.quantity }}</td>
          <td><i class="bi" [ngClass]="{'bi-check-square-fill text-success': product.selected, 'bi-square text-muted': !product.selected}"></i></td>
          <td>
            <button class="btn btn-sm btn-outline-primary me-1" title="Modifier produit" [routerLink]="['/products/edit', product.id]">
              <i class="bi bi-pencil"></i>
            </button>
            <button class="btn btn-sm btn-outline-danger" title="Supprimer produit" (click)="handleDelete(product)">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="products?.length === 0">
          <td colspan="6" class="text-center py-3">
            Aucun produit trouvé. Cliquez sur "Ajouter un Produit" pour en créer un.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
