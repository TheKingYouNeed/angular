<div class="container mt-4">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h2>{{ isEditing ? 'Modifier' : 'Ajouter' }} Produit</h2>
        </div>
        <div class="card-body">
          <!-- Loading indicator -->
          <div *ngIf="loading" class="d-flex justify-content-center my-5">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Chargement...</span>
            </div>
          </div>
          
          <!-- Error message -->
          <div *ngIf="error" class="alert alert-danger" role="alert">
            {{ error }}
            <button type="button" class="btn-close float-end" (click)="error = null"></button>
          </div>
          
          <!-- Product form -->
          <form *ngIf="!loading" (ngSubmit)="saveProduct()">
            <!-- Hidden ID field for editing -->
            <input type="hidden" [(ngModel)]="product.id" name="id">
            
            <!-- Name field -->
            <div class="mb-3">
              <label for="name" class="form-label">Nom du Produit</label>
              <input 
                type="text" 
                class="form-control" 
                id="name" 
                name="name" 
                [(ngModel)]="product.name" 
                required
                placeholder="Entrez le nom du produit">
            </div>
            
            <!-- Price field -->
            <div class="mb-3">
              <label for="price" class="form-label">Prix</label>
              <div class="input-group">
                <span class="input-group-text">$</span>
                <input 
                  type="number" 
                  class="form-control" 
                  id="price" 
                  name="price" 
                  [(ngModel)]="product.price" 
                  required
                  min="0"
                  step="0.01"
                  placeholder="0.00">
              </div>
            </div>
            
            <!-- Quantity field -->
            <div class="mb-3">
              <label for="quantity" class="form-label">Quantité</label>
              <input 
                type="number" 
                class="form-control" 
                id="quantity" 
                name="quantity" 
                [(ngModel)]="product.quantity" 
                required
                min="0"
                step="1"
                placeholder="Entrez la quantité">
            </div>
            
            <!-- Selected field -->
            <div class="mb-3 form-check">
              <input 
                type="checkbox" 
                class="form-check-input" 
                id="selected" 
                name="selected" 
                [(ngModel)]="product.selected">
              <label class="form-check-label" for="selected">Sélectionné</label>
            </div>
            
            <!-- Form buttons -->
            <div class="d-flex justify-content-between">
              <button type="button" class="btn btn-secondary" (click)="cancel()">
                <i class="bi bi-x-circle me-1"></i> Annuler
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-save me-1"></i> {{ isEditing ? 'Mettre à jour' : 'Enregistrer' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
